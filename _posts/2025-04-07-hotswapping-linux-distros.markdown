---
layout: post
title:  "Hotswapping Linux Distro"
date:   2025-04-14 11:37:58 -0600
categories: Linux sysadmin
---

Yes hotswapping linux distros is possible, but it's not fun or necessarily very easy. What do I mean by hotswapping distros? Imagine you have fedora linux installed on /dev/sda, and nothing of any import on /dev/sdb. You can format /dev/sdb and mount it, then install debian on /dev/sdb and switch over to the debian installation without a reboot. This kind of thing is usually done to give you a temporary distribution to do things in like compile packages or work on building your own distro. This is accomplished with the chroot command, which CHanges the ROOT directory. The reason I set out on this journey was that I had a fedora server installed on a desktop in a closet and wanted to switch to nixos but it's a pain to hook a monitor and keyboard up to the desktop and boot into install media. Since this is something I haven't heard about being done before I figured I would document my journey with trying to make it work.

The first few steps were pretty easy, I asked chatgpt if it was possible and it said it was, but gave some instructions that ended up being flawed, which is expected. Though it gave me enough hope to forge ahead stubbornly. I was already somewhat familiar with the process having installed gentoo and even LFS once. From the running feodra install I needed an installation of something on anohter hd. I went with debian because it was particularly easy to setup. Installing debootstrap from the yum repos and running it pointed at /dev/sdb1 gave me a debian installation that I could start with. Next step was to remount /dev /proc /sys and /run with bind mounts into the /dev/sdb1 fs and chroot into it. So far everything was going as expected. Next I needed to format /dev/sda so I used fdisk to make the partition changes I needed which is where I ran into my first roadblock, even though I was using a different device for root linux didn't want to let me apply the changes to the partition table of /dev/sda. After searching around I found a command <cmd here> which basically forces the kernel to eject the disk, kind of like when you yank the cable out of it while the system is running, once I did that I told it to rescan and /dev/sda was now /dev/sdd, and the partition changes were applied. Some SUCCESS!.

Now I'm running debian from /dev/sdb1 with /dev/sdd formatted and ready to recieve its new os. There are some odd messages that pop up occasionally while installing debian software or working with the partitions or filesystem but they dont seem to be fatal errors so I'm just going to ignore them for the time. Time to install nixos on /dev/sdd!